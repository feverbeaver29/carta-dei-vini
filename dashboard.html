<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard - Wine's Fever</title>
<style>
body {
  margin: 0;
  font-family: 'Segoe UI', Tahoma, sans-serif;
  background-color: #fff9f4;
  display: flex;
}
.sidebar {
  width: 250px;
  background-color: #fff2ec;
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 20px;
  min-height: 100vh;
}
.sidebar h2 {
  font-size: 1.5em;
  margin-bottom: 30px;
}
.sidebar button {
  padding: 15px;
  background-color: #b00;
  color: white;
  border: none;
  border-radius: 25px;
  font-size: 1em;
  cursor: pointer;
  transition: background 0.3s;
}
.sidebar button:hover {
  background-color: #800000;
}
.main {
  flex: 1;
  padding: 40px;
}
.main h1 {
  font-size: 2.5em;
}
label {
  display: block;
  margin-top: 20px;
  font-size: 1.2em;
}
input, select {
  width: 300px;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #ccc;
  margin-top: 5px;
}
.preview, .palette-preview {
  margin-top: 10px;
  padding: 20px;
  border: 1px dashed #aaa;
  border-radius: 8px;
  background-color: #f4f4f4;
}
.palette-preview {
  width: 300px;
}
.palette-sample {
  background-color: #ddd;
  color: #000;
  padding: 10px;
  margin-bottom: 5px;
  border-radius: 6px;
}
.save {
  margin-top: 30px;
  background-color: #b00;
  color: white;
  padding: 15px 30px;
  border: none;
  border-radius: 25px;
  font-size: 1.2em;
  cursor: pointer;
}
.save:hover {
  background-color: #800000;
}
#qrPopup {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.8);
  display: none;
  justify-content: center;
  align-items: center;
}
#qrPopupContent {
  background: white;
  padding: 20px;
  border-radius: 12px;
  text-align: center;
}
#qrPopupContent img {
  width: 250px;
  height: 250px;
}
#qrPopupContent a {
  display: block;
  margin-top: 10px;
  background-color: #b00;
  color: white;
  padding: 10px;
  text-decoration: none;
  border-radius: 8px;
}
</style>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display&family=Raleway&family=Dancing+Script&family=Montserrat&family=Roboto&display=swap" rel="stylesheet">
</head>
<body>

<div class="sidebar">
  <h2 id="ristoranteName">Ristorante Nome</h2>
  <button onclick="window.location.href='admin.html'">Gestisci Carta</button>
  <button onclick="window.location.href='carta.html'">Visualizza Carta</button>
  <button onclick="generateQRCode()">Genera QR Code</button>
</div>

<div class="main">
  <h1>Design Carta dei Vini</h1>

  <label>Nome da visualizzare in carta</label>
  <input type="text" id="displayName" oninput="updatePreview()">
  <div class="preview" id="namePreview">Anteprima Nome</div>

  <label>Font</label>
  <select id="fontSelector" onchange="updatePreview()">
    <option value="Arial">Arial</option>
    <option value="Montserrat">Montserrat</option>
    <option value="Raleway">Raleway</option>
    <option value="Dancing Script">Dancing Script</option>
    <option value="Playfair Display">Playfair Display</option>
  </select>

  <label>Palette Colori</label>
  <select id="paletteSelector" onchange="updateColorPreview()">
    <option value="#b00">Rosso</option>
    <option value="#d4af37">Oro</option>
    <option value="#005f73">Blu Elegante</option>
    <option value="#a3b18a">Verde Salvia</option>
    <option value="#888">Grigio Minimal</option>
    <option value="#000">Black & White</option>
  </select>
  <div class="palette-preview" id="palettePreview">
    <div class="palette-sample">Categoria: Vini Rossi</div>
    <div class="palette-sample">Nome Vino: Chianti DOCG</div>
    <div class="palette-sample">Prezzo: 25â‚¬</div>
  </div>

  <button class="save">Salva Impostazioni</button>
</div>

<div id="qrPopup">
  <div id="qrPopupContent"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
document.getElementById('ristoranteName').innerText = "Wine's Fever - Dashboard";

function updatePreview() {
  const name = document.getElementById('displayName').value;
  const font = document.getElementById('fontSelector').value;
  const preview = document.getElementById('namePreview');
  preview.innerText = name || "Anteprima Nome";
  preview.style.fontFamily = font;
}

function updateColorPreview() {
  const color = document.getElementById('paletteSelector').value;
  const previewItems = document.querySelectorAll('.palette-sample');
  previewItems.forEach(item => {
    item.style.backgroundColor = color;
    item.style.color = (color === "#000" ? "#fff" : "#000");
  });
}

function generateQRCode() {
  const popup = document.getElementById('qrPopup');
  const content = document.getElementById('qrPopupContent');
  popup.style.display = "flex";
  content.innerHTML = "";

  const url = "https://carta-dei-vini.vercel.app/carta.html?ristorante_id=123";
  const qr = new QRCode(content, {
    text: url,
    width: 250,
    height: 250
  });

  setTimeout(() => {
    const img = content.querySelector('img');
    const link = document.createElement('a');
    link.href = img.src;
    link.download = "qr-code.png";
    link.innerText = "Scarica QR Code";
    content.appendChild(link);
  }, 500);

  popup.onclick = () => {
    popup.style.display = "none";
  };
}
</script>

</body>
</html>
